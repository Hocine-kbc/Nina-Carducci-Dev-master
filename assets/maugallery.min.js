!function(t){
    t.fn.mauGallery=function(a){
    var a=t.extend(t.fn.mauGallery.defaults,a),
    e=[];
    return this.each(function(){
    t.fn.mauGallery.methods.createRowWrapper(t(this)),
    a.lightBox&&t.fn.mauGallery.methods.createLightBox(t(this),a.lightboxId,a.navigation),
    t.fn.mauGallery.listeners(a),
    t(this).children(".gallery-item").each(function(l){
    t.fn.mauGallery.methods.responsiveImageItem(t(this)),
    t.fn.mauGallery.methods.moveItemInRowWrapper(t(this)),
    t.fn.mauGallery.methods.wrapItemInColumn(t(this),a.columns);
    var i=t(this).data("gallery-tag");
    a.showTags&&void 0!==i&&-1===e.indexOf(i)&&e.push(i)
    }),
    a.showTags&&t.fn.mauGallery.methods.showItemTags(t(this),a.tagsPosition,e),
    t(this).fadeIn(500)
    })
    },
    t.fn.mauGallery.defaults={
    columns:3,
    lightBox:!0,
    lightboxId:null,
    showTags:!0,
    tagsPosition:"bottom",
    navigation:!0
    },
    t.fn.mauGallery.listeners=function(a){
    t(".gallery-item").on("click",function(){
    a.lightBox&&"IMG"===t(this).prop("tagName")&&t.fn.mauGallery.methods.openLightBox(t(this),a.lightboxId)
    }),
    t(".gallery").on("click",".nav-link",t.fn.mauGallery.methods.filterByTag),
    t(".gallery").on("click",".mg-prev",()=>t.fn.mauGallery.methods.prevImage(a.lightboxId)),
    t(".gallery").on("click",".mg-next",()=>t.fn.mauGallery.methods.nextImage(a.lightboxId)),
    t(document).on("keydown",function(e){
    t("#"+(a.lightboxId||"galleryLightbox")).hasClass("show")&&
    ("ArrowLeft"===e.key?t.fn.mauGallery.methods.prevImage(a.lightboxId):
    "ArrowRight"===e.key?t.fn.mauGallery.methods.nextImage(a.lightboxId):
    "Escape"===e.key&&t("#"+(a.lightboxId||"galleryLightbox")).modal("hide"))
    })
    },
    t.fn.mauGallery.methods={
    createRowWrapper:function(t){
    t.children().first().hasClass("row")||t.append('<div class="gallery-items-row row"></div>')
    },
    wrapItemInColumn:function(t,a){
    if(a.constructor===Number)
    t.wrap(`<div class='item-column mb-4 col-${Math.ceil(12/a)}'></div>`);
    else if(a.constructor===Object){
    var e="";
    a.xs&&(e+=` col-${Math.ceil(12/a.xs)}`),
    a.sm&&(e+=` col-sm-${Math.ceil(12/a.sm)}`),
    a.md&&(e+=` col-md-${Math.ceil(12/a.md)}`),
    a.lg&&(e+=` col-lg-${Math.ceil(12/a.lg)}`),
    a.xl&&(e+=` col-xl-${Math.ceil(12/a.xl)}`),
    t.wrap(`<div class='item-column mb-4${e}'></div>`)
    }
    else console.error(`Columns should be defined as numbers or objects. ${typeof a} is not supported.`)
    },
    moveItemInRowWrapper:function(t){
    t.appendTo(".gallery-items-row")
    },
    responsiveImageItem:function(t){
    "IMG"===t.prop("tagName")&&t.addClass("img-fluid")
    },
    openLightBox:function(a,e){
    t(`#${e}`).find(".lightboxImage").attr("src",a.attr("src")),
    t(`#${e}`).modal("toggle")
    },
    prevImage:function(a){
    let e=null;
    t("img.gallery-item").each(function(){
    t(this).attr("src")===t(".lightboxImage").attr("src")&&(e=t(this))
    });
    let l=t(".tags-bar span.active-tag").data("images-toggle"),
    i=[];
    "all"===l?
    t(".item-column").each(function(){
    t(this).children("img").length&&i.push(t(this).children("img"))
    }):
    t(".item-column").each(function(){
    t(this).children("img").data("gallery-tag")===l&&i.push(t(this).children("img"))
    });
    let s=0;
    t(i).each(function(a){
    t(e).attr("src")===t(this).attr("src")&&(s=a)
    });
    let n=i[s-1]||i[i.length-1];
    t(".lightboxImage").attr("src",t(n).attr("src"))
    },
    nextImage:function(a){
    let e=null;
    t("img.gallery-item").each(function(){
    t(this).attr("src")===t(".lightboxImage").attr("src")&&(e=t(this))
    });
    let l=t(".tags-bar span.active-tag").data("images-toggle"),
    i=[];
    "all"===l?
    t(".item-column").each(function(){
    t(this).children("img").length&&i.push(t(this).children("img"))
    }):
    t(".item-column").each(function(){
    t(this).children("img").data("gallery-tag")===l&&i.push(t(this).children("img"))
    });
    let s=0;
    t(i).each(function(a){
    t(e).attr("src")===t(this).attr("src")&&(s=a)
    });
    let n=i[s+1]||i[0];
    t(".lightboxImage").attr("src",t(n).attr("src"))
    },
    createLightBox:function(t,a,e){
    t.append(`<div class="modal fade" id="${a||"galleryLightbox"}" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
    <div class="modal-content">
    <div class="modal-body">
    ${e?'<button class="mg-prev" aria-label="Image précédente" style="cursor:pointer;position:absolute;top:50%;left:15px;background:white;border:none;padding:10px 15px;border-radius:50%;box-shadow:0 2px 5px rgba(0,0,0,0.2);"><</button>':'<span style="display:none;" />'}
    <img class="lightboxImage img-fluid" alt="Contenu de l'image affichée dans la modale au clique"/>
    ${e?'<button class="mg-next" aria-label="Image suivante" style="cursor:pointer;position:absolute;top:50%;right:15px;background:white;border:none;padding:10px 15px;border-radius:50%;box-shadow:0 2px 5px rgba(0,0,0,0.2);">></button>':'<span style="display:none;" />'}
    </div>
    </div>
    </div>
    </div>`)
    },
    showItemTags:function(a,e,l){
    var i='<li class="nav-item"><span class="nav-link active active-tag" data-images-toggle="all">Tous</span></li>';
    t.each(l,function(t,a){
    i+=`<li class="nav-item active">
    <span class="nav-link" data-images-toggle="${a}">${a}</span></li>`
    });
    var s=`<ul class="my-4 tags-bar nav nav-pills">${i}</ul>`;
    "bottom"===e?a.append(s):"top"===e?a.prepend(s):console.error(`Unknown tags position: ${e}`)
    },
    filterByTag:function(){
    if(!t(this).hasClass("active-tag")){
    t(".active-tag").removeClass("active active-tag"),
    t(this).addClass("active active-tag");
    var a=t(this).data("images-toggle");
    t(".gallery-item").each(function(){
    t(this).parents(".item-column").hide(),
    "all"===a?
    t(this).parents(".item-column").show(300):
    t(this).data("gallery-tag")===a&&t(this).parents(".item-column").show(300)
    })
    }
    }
    }
    }(jQuery);